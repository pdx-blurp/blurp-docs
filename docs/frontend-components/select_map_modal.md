---
layout: default
title: select_map_modal.jsx
parent: Frontend Components Documentation 
grand_parent: Document Resources
nav_order: 1
---

# Select_map_modal

## States

*   **isLoading:** used for checking if the backend request for the maps is still 
ongoing. While it’s set to true, the modal will show text that says “Loading…” 
to inform the user that its attempting to fetch resources. It can be flipped 
back to false a few different ways, one of which is that it was successful in 
getting the maps and has done all the processing needed to display them. The 
other way would be that an error occurred in the process, like in the case 
where the user has no maps on their account, or that the server isn’t 
responding. It will be flipped to false, and an error message will be put up 
to inform the user that something’s gone wrong.
*   **mapName:** used for storing the title a user enters for a new map, and in 
the case they’ve supplied a title when creating a new map, it will set the 
title to that. 
*   **serverFailure:** a boolean that gets flipped to true when a network related 
error has occurred while the frontend was trying to retrieve maps from the 
backend. Currently, this is only used for preventing the user from attempting 
to create new maps on their account if the server isn’t responding to the frontend. 
*   **errorMsg:** stores a user facing error message within it. These messages 
typically lack more technical details but are intended to still inform the user 
that something has gone wrong. It’s only set within the catch block of the 
request to get all the users maps, and is rendered in place of the list of maps 
when something goes wrong.
*   **maps:** used for storing the list of maps and titles a user has attached to 
their account. Each map’s information is stored in a sublist of the maps state, 
with each sublist acting like a tuple, with the first value being the mapID and 
the second being the title. 
*   **genList:** Contains a list of HTML objects generated from maps. Each list 
item is formatted to display the map title and buttons allowing for the user to 
select a map or delete it (currently there’s no confirmation to delete)

## useEffect hooks

The first useEffect hook runs upon the opening of the map modal, which by default 
is set to open upon loading in. WIthin the hook, if the user’s sessionID has been 
set within blurpmap, it will request a list of that user's maps and either build 
a list of the maps that the user has, or fail in the process and save the error 
to a state. The second useEffect hook is used for taking the data generated by 
the first hook, and then generates the html code that will be displayed, 
whether that's from the list of maps created, or from an error occurring. 

## Methods

*   **deleteMap:** Makes a request to the backend to delete the map with the ID 
provided as an argument. On success it will remove the map from the local list 
which will trigger a state refresh and show the user a new version of the list 
without the deleted map. If the user is deleting a map they currently have 
loaded it will also clear the mapID, title, and clear the entire graph.
*   **mapList:** Returns html objects to be rendered in the modal, with it initially
 doing a loading message. It also contains a conditional within the html code, 
 where it will generate a list of items using map, or if there's nothing in the 
 list, inform the user that there's no maps on their account. In the case of an 
 error, it instead renders with the error message to tell the user what 
 happened. This function only gets within the useEffect hook that looks at 
 changes in maps or errorMsg.
*   **selectView:** Contains the majority of html/css styling for the modal. It 
renders two possible views, with the view setting coming in as a prop from 
blurpmap. It can render in the start state, which renders a list, a text box, 
a create new map button, and a demo button. The demo button allows the user to 
create a quick map that doesn’t save anything to the account, and the create a 
map button creates a map on their account, with it requiring the user to have 
entered a title into the textbox. For the not logged in view, it instead renders 
a bit of text informing them that they can’t save to the cloud, but still giving 
the user the option to click the demo button to try out the app. 